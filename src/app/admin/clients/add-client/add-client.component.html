<main role="main" class="main-body-sty mt-3">
  <div class="row">
    <div class="col-md-12">
      <div class="top_scne">
        <div class="top_scne_in">
          <h1 class="add_heading_text" style="font-size: 290%; font-weight: bold;">Clients</h1>
          <button class="btn btn-edtng-add" *ngIf="!clientId">Creating</button>
          <button class="btn btn-edtng-add" *ngIf="clientId">Editing</button>
        </div>
      </div>
    </div>
  </div>

  <div class="main-content-add">
    <div class="main-content-inner">
      <div class="row">
        <div class="mb-3 col-md-4">
          <label class="form-label lebel-text">Title</label>
          <select
            class="form-select"
            [(ngModel)]="title"
            (change)="validateTitle()"
          >
            <option value="" disabled>Select Title</option>
            <option value="Mr">Mr</option>
            <option value="Mrs">Mrs</option>
            <option value="Ms">Ms</option>
            <option value="Dr">Dr</option>
            <option value="Prof">Prof</option>
          </select>
          <span class="error-msg" *ngIf="titleErr">Title required</span>
        </div>
        <div class="mb-3 col-md-4">
          <label class="form-label lebel-text">First Name</label>
          <input
            type="text"
            class="form-control input-text"
            [(ngModel)]="firstName"
            (keyup)="validateFirstName()"
          />
          <span class="error-msg" *ngIf="firstNameErr"
            >First Name required</span
          >
        </div>
        <div class="mb-3 col-md-4">
          <label class="form-label lebel-text">Last Name</label>
          <input
            type="text"
            class="form-control input-text"
            [(ngModel)]="lastName"
            (keyup)="validateLastName()"
          />
          <span class="error-msg" *ngIf="lastNameErr">Last Name required</span>
        </div>
      </div>
      <div class="row">
        <div class="mb-3 col-md-4">
          <label class="form-label lebel-text">City</label>
          <input
            type="text"
            class="form-control input-text"
            [(ngModel)]="city"
            (keyup)="validateCity()"
          />
          <span class="error-msg" *ngIf="cityErr">City required</span>
        </div>
        <div class="mb-3 col-md-4">
          <label class="form-label lebel-text">Postcode</label>
          <input
            type="text"
            class="form-control input-text"
            [(ngModel)]="postcode"
            (keyup)="validatePostcode()"
          />
          <span class="error-msg" *ngIf="postcodeErr">Postcode required</span>
        </div>
        <div class="mb-3 col-md-4">
          <label class="form-label lebel-text">Telephone</label>
          <input
            type="text"
            class="form-control input-text"
            [(ngModel)]="telephone"
            (keyup)="validateTelephone()"
          />
          <span class="error-msg" *ngIf="telephoneErr">Telephone required</span>
        </div>
      </div>
      <div class="row">
        <div class="mb-3 col-md-4">
          <label class="form-label lebel-text">Email</label>
          <input
            type="text"
            class="form-control input-text"
            [(ngModel)]="email"
            (keyup)="validateEmail()"
          />
          <span class="error-msg" *ngIf="emailErr">Email required</span>
          <span class="error-msg" *ngIf="validEmailErr"
            >Valid email required</span
          >
        </div>
        <div class="mb-3 col-md-4">
          <label class="form-label lebel-text">Time Zone</label>
          <input
            type="text"
            class="form-control input-text"
            [(ngModel)]="timeZone"
            (keyup)="validateTimeZone()"
          />
          <span class="error-msg" *ngIf="timeZoneErr">Time Zone required</span>
        </div>
      </div>
      <div class="row mb-3 col-md-12">
        <h4>Children</h4>
        <div
          *ngFor="let child of children; let i = index"
          class="child-container"
        >
          <div class="row">
            <div class="mb-3 col-md-4">
              <label class="form-label lebel-text">Child Name</label>
              <input
                type="text"
                class="form-control input-text"
                [(ngModel)]="child.childName"
              />
            </div>
            <div class="mb-3 col-md-4">
              <label class="form-label lebel-text">Date of Birth</label>
              <input
                type="date"
                class="form-control input-text"
                [(ngModel)]="child.dateOfBirth"
              />
            </div>
            <div class="mb-3 col-md-4">
              <label class="form-label lebel-text">Gender</label>
              <select class="form-select" [(ngModel)]="child.gender">
                <option value="">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div class="mb-3 col-md-6">
              <label class="form-label lebel-text">School</label>
              <input
                type="text"
                class="form-control input-text"
                [(ngModel)]="child.school"
              />
            </div>
            <div class="mb-3 col-md-6">
              <label class="form-label lebel-text">Level</label>
              <input
                type="text"
                class="form-control input-text"
                [(ngModel)]="child.level"
              />
            </div>
          </div>
          <button class="btn btn-danger" (click)="removeChild(i)">
            Remove Child
          </button>
        </div>
        <button class="btn btn-primary" (click)="addChild()">Add Child</button>
      </div>
    </div>
  </div>

  <div class="bottom-secne" style="text-align: center">
    <button
      class="delete-button btn btn-primary"
      *ngIf="clientId"
      (click)="onClickDelete()"
    >
      Delete Client
    </button>
    <div *ngIf="!clientId"></div>
    <div>
      <button class="cancel-button btn btn-primary" (click)="resetForm()">
        Cancel
      </button>
      <button
        class="submit-button btn btn-primary"
        *ngIf="clientId == null"
        (click)="add()"
      >
        Save
      </button>
      <button
        class="submit-button btn btn-primary"
        *ngIf="clientId != null"
        (click)="edit()"
      >
        Save
      </button>
    </div>
  </div>
  <a
    class="mt-2 a-back"
    style="color: #0366d6; cursor: pointer"
    (click)="goBack()"
    >Back to List</a
  >
</main>

<ng-template #deleteModal>
  <div class="modal-content">
    <div class="modal-header">
      <div class="container-fluid">
        <div class="row align-items-center">
          <div class="col-sm-10 mt-3">
            <h3
              class="modal-title d-inline-block align-middle ml"
              style="color: black !important"
            >
              Are you sure you want to delete this client?
            </h3>
          </div>
          <div class="col-sm-2 d-flex justify-content-end">
            <button
              type="button"
              (click)="closeModal()"
              class="btn-close delteClose"
            ></button>
          </div>
        </div>
      </div>
    </div>
    <div class="bottom-secnedlt" style="text-align: center">
      <div>
        <button
          type="button"
          class="cancel-button btn btn-primary btn-lg"
          style="width: 100px"
          (click)="closeModal()"
        >
          Cancel
        </button>
      </div>
      <div>
        <button
          type="button"
          class="btn btn-danger"
          style="width: 100px"
          (click)="delete()"
        >
          Delete
        </button>
      </div>
    </div>
  </div>
</ng-template>
